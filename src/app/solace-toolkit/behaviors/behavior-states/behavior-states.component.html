<solacetk-model-list [(model)]="model" moduleName="Behavior States" modelUri="Behaviors/states">
    <div class="editor">

        <div class="disp-flex">
            <mat-form-field class="auto-flex model-formfield">
                <input matInput placeholder="Start Delay" [(ngModel)]="model.startDelay">
            </mat-form-field>
            <mat-form-field class="auto-flex model-formfield">
                <input matInput placeholder="End Delay" [(ngModel)]="model.endDelay">
            </mat-form-field>
            <mat-checkbox class="auto-flex align-center" name="interruptable" [(ngModel)]="model.interruptable">
                Interruptable
            </mat-checkbox>
        </div>

        <mat-divider class="mb-2 mt-2"></mat-divider>
    </div>

    <div class="editor-panels">
        <mat-accordion class="auto-flex align-start full-width">
            <mat-expansion-panel>
                <mat-expansion-panel-header>
                    <mat-panel-title>
                        Conditions
                    </mat-panel-title>
                </mat-expansion-panel-header>

                <ng-template matExpansionPanelContent>
                    <div *ngIf="model.conditions">
                        <mat-card *ngFor="let cond of model.conditions">
                            <mat-card-title>{{cond.name}}</mat-card-title>
                            <mat-card-subtitle>Description: {{cond.description}}</mat-card-subtitle>
                        </mat-card>
                    </div>
                </ng-template>

                <mat-action-row>
                    <button mat-button color="primary" (click)="openConditionsSheet()">Add</button>
                </mat-action-row>
            </mat-expansion-panel>


            <mat-expansion-panel>
                <mat-expansion-panel-header>
                    <mat-panel-title>
                        State Animations
                    </mat-panel-title>
                </mat-expansion-panel-header>

                <ng-template matExpansionPanelContent>

                    <div *ngIf="model.animations">
                        <div cdkDropList (cdkDropListDropped)="dropAnims($event)">
                            <div *ngFor="let animation of model.animations">

                                <mat-card cdkDrag [cdkDragData]="animation">
                                    <mat-card-title>{{animation.name}}</mat-card-title>
                                    <mat-card-subtitle>Description: {{animation.description}}</mat-card-subtitle>
                                </mat-card>
                            </div>
                        </div>
                    </div>

                </ng-template>


                <mat-action-row>
                    <button mat-button color="primary" (click)="openAnimationsSheet()">Add</button>
                </mat-action-row>

            </mat-expansion-panel>

            <mat-expansion-panel>
                <mat-expansion-panel-header>
                    <mat-panel-title>
                        State Action
                    </mat-panel-title>
                </mat-expansion-panel-header>


                <ng-template matExpansionPanelContent>
                    <div *ngIf="model.action">
                        <mat-card>
                            <mat-card-title>{{model.action.name}}</mat-card-title>
                            <mat-card-subtitle>Description: {{model.action.description}}</mat-card-subtitle>
                        </mat-card>
                    </div>

                </ng-template>

                <mat-action-row>
                    <button mat-button color="primary" (click)="openActionsSheet()">Add</button>
                </mat-action-row>
            </mat-expansion-panel>


            <mat-expansion-panel>
                <mat-expansion-panel-header>
                    <mat-panel-title>
                        Linked State
                    </mat-panel-title>
                </mat-expansion-panel-header>
                <ng-template matExpansionPanelContent>
                    <div class="auto-flex align-start" *ngIf="model.next">
                        <mat-card>
                            <mat-card-title>{{model.next.name}}</mat-card-title>
                            <mat-card-subtitle>Description: {{model.next.description}}</mat-card-subtitle>
                        </mat-card>
                    </div>
                </ng-template>
                <mat-action-row>
                    <button mat-button color="primary" (click)="openNextStateSheet()">Add</button>
                </mat-action-row>
            </mat-expansion-panel>


            <mat-expansion-panel>
                <mat-expansion-panel-header>
                    <mat-panel-title>
                        Attributes
                    </mat-panel-title>
                </mat-expansion-panel-header>

                <div class="full-height"></div>

            </mat-expansion-panel>
        </mat-accordion>
    </div>

</solacetk-model-list>