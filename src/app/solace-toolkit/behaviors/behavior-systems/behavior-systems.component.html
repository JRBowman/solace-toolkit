<solacetk-model-list [(model)]="model" moduleName="Behavior Systems" modelUri="Behaviors/systems">
    <div class="editor">

        <div class="disp-flex">
            <!-- <mat-form-field class="model-formfield auto-flex">
                <mat-select placeholder="Behavior Type" [(ngModel)]="model.behaviorType">
                    <mat-option *ngFor="let item of behaviorTypes" [value]="item">{{this.behavior[item]}}
                    </mat-option>
                </mat-select>
            </mat-form-field> -->
            <mat-form-field class="auto-flex">
                <input matInput #startState placeholder="Start State" [(ngModel)]="model.startState">
            </mat-form-field>
        </div>

        <mat-divider class="mb-2 mt-2"></mat-divider>

    </div>

    <div class="editor-panels">
        <mat-accordion class="align-start">

            <mat-expansion-panel>
                <mat-expansion-panel-header>
                    <mat-panel-title>
                        Behavior Branching
                    </mat-panel-title>
                </mat-expansion-panel-header>

                <ng-template matExpansionPanelContent>

                    <div *ngIf="model.branches">
                        <mat-list cdkDropList (cdkDropListDropped)="dropBranches($event)">
                            <mat-list-item cdkDrag [cdkDragData]="branch" *ngFor="let branch of model.branches">
                                <h3 matLine>{{branch.name}}</h3>
                                <p matLine>Description: {{branch.description}}</p>
                            </mat-list-item>
                        </mat-list>
                    </div>

                </ng-template>


                <mat-action-row>
                    <button mat-button color="primary" (click)="openBranchesSheet()">Add</button>
                </mat-action-row>

            </mat-expansion-panel>

            <solacetk-attributes-panel [(model)]="model.stats"></solacetk-attributes-panel>

            <mat-expansion-panel>
                <mat-expansion-panel-header>
                    <mat-panel-title>
                        Events
                    </mat-panel-title>
                </mat-expansion-panel-header>


                <ng-template matExpansionPanelContent>
                    <div *ngIf="model.events">
                        <div *ngFor="let ev of model.events">
                            <mat-card>
                                <mat-card-title>{{ev.name}}</mat-card-title>
                                <mat-card-subtitle>Description: {{ev.description}}</mat-card-subtitle>
                                <mat-card-content>
                                    <div *ngFor="let condition of ev.conditions">
                                        <solacetk-attributes-panel [(model)]="condition.keys"></solacetk-attributes-panel>
                                    </div>
                                </mat-card-content>
                            </mat-card>
                        </div>
                    </div>

                </ng-template>

                <mat-action-row>
                    <button mat-button color="primary" (click)="openActionsSheet()">Add</button>
                </mat-action-row>
            </mat-expansion-panel>

        </mat-accordion>

    </div>
</solacetk-model-list>