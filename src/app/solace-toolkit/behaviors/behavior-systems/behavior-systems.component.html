<solacetk-model-list [(model)]="model" moduleName="Behavior Systems" modelUri="Behaviors/systems" moduleColor="#806090">
    <div class="editor">

        <div class="disp-flex">
            <mat-form-field class="auto-flex font-small">

                <input matInput #startState placeholder="Start State" [(ngModel)]="model.startState">
            </mat-form-field>
        </div>

        <mat-divider></mat-divider>

    </div>

    <div class="editor-panels">

        <solacetk-attributes-panel panelName="State Variables Collection" panelType="expansionpanel"
            panelColor="#4a148c" [(model)]="model.varData"></solacetk-attributes-panel>

        <div class="no-flex gap-1"></div>
        <mat-expansion-panel>
            <mat-expansion-panel-header>
                <mat-panel-title>
                    <mat-icon class="mr-2">schema</mat-icon>
                    Behavior Works
                </mat-panel-title>
            </mat-expansion-panel-header>

            <ng-template matExpansionPanelContent>

                <div cdkDropList (cdkDropListDropped)="dropBranches($event)">


                    <div class="disp-flex">
                        <div class="disp-flex auto-flex" *ngFor="let behavior of model.behaviors">

                            <solacetk-animation-editor class="auto-flex" style="padding: 4px;" [panelName]="behavior?.name ?? 'Anim Data'" [modelName]="behavior.animation.name"
                                [(model)]="behavior.animation.actFrameData" [showDataPanel]="false" [showFrames]="false"
                                bgColor="#009688"></solacetk-animation-editor>

                            <div class="no-flex gap-1"></div>
                        </div>
                    </div>

                </div>

            </ng-template>


            <mat-action-row>
                <button mat-button color="primary" (click)="openBranchesSheet()">Add</button>
            </mat-action-row>

        </mat-expansion-panel>

        <div class="no-flex gap-1"></div>

        <solacetk-event-panel [(model)]="model.events"></solacetk-event-panel>

    </div>
</solacetk-model-list>